<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Portal Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      max-width: 720px;
      margin: 40px auto;
      padding: 0 16px;
      background: #f7f8fa;
      color: #222;
    }
    h1 {
      margin: 0 0 16px;
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: -1px;
    }
    button {
      padding: 8px 18px;
      border: none;
      border-radius: 6px;
      background: linear-gradient(90deg,#4f8cff,#2355d6);
      color: #fff;
      font-weight: 500;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 1px 4px #0001;
      transition: background .2s;
    }
    button[disabled] {
      opacity: .6;
      cursor: not-allowed;
      background: #ccc;
      color: #888;
    }
    .show-more, .show-less {
      background: #fff;
      color: #2355d6;
      border: 1px solid #2355d6;
      margin: 8px 0 0 0;
      font-size: 0.95rem;
      padding: 6px 16px;
      border-radius: 5px;
      box-shadow: none;
    }
    input[type="number"] {
      width: 90px;
      padding: 6px 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    .row {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      margin: 8px 0 16px;
    }
    #status, #sched {
      margin-top: 12px;
      white-space: pre-wrap;
      font-size: 1.08rem;
    }
    .ok { color: #0a7a2f; }
    .err { color: #b00020; }
    .muted { color: #666; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    #historyList {
      max-height: 320px;
      overflow-y: auto;
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 1px 4px #0001;
      padding: 8px 12px;
      margin-top: 8px;
    }
    #scheduleList {
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 1px 4px #0001;
      padding: 8px 12px;
      margin-top: 8px;
    }
    .sync-summary {
      font-weight: 500;
      margin-bottom: 4px;
    }
    .sync-detail {
      margin: 0 0 8px 0;
      padding: 0 0 0 18px;
    }
    .sync-users {
      font-size: 0.97rem;
      color: #444;
      margin: 4px 0 0 0;
    }
    details[open] summary {
      color: #2355d6;
    }
    details summary {
      cursor: pointer;
      font-size: 1rem;
      margin-bottom: 2px;
    }
  </style>
</head>
<body>

  <h1>Portal Admin</h1>

  <div id="loginBox">
    <h2>ƒêƒÉng nh·∫≠p</h2>
    <form id="loginForm">
      <div>
        <input id="loginUser" type="text" placeholder="T√™n ƒëƒÉng nh·∫≠p" autocomplete="username">
      </div>
      <div>
        <input id="loginPass" type="password" placeholder="M·∫≠t kh·∫©u" autocomplete="current-password">
      </div>
      <button id="btnLogin" type="submit">ƒêƒÉng nh·∫≠p</button>
      <div id="loginMsg" class="muted"></div>
    </form>
  </div>



  <!-- Trang ch·ªß qu·∫£n tr·ªã -->
  <div id="homeBox" style="display:none">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:24px;">
      <div id="userInfo" class="muted" style="font-size:1rem;"></div>
      <button id="btnLogout" style="background:#eee;color:#2355d6;border:1px solid #2355d6;padding:6px 18px;font-size:1rem;">ƒêƒÉng xu·∫•t</button>
    </div>
    <div class="feature-grid">
      <div class="feature-card" data-feature="sync-users">
        <div class="feature-icon">üë•</div>
        <div class="feature-title">ƒê·ªìng b·ªô ng∆∞·ªùi d√πng</div>
        <div class="feature-desc">ƒê·ªìng b·ªô users v√†o group</div>
      </div>
      <div class="feature-card" data-feature="sync-ad-azure">
        <div class="feature-icon">‚òÅÔ∏è</div>
        <div class="feature-title">Sync AD to Azure</div>
        <div class="feature-desc">ƒê·ªìng b·ªô t√†i kho·∫£n AD l√™n Azure.</div>
      </div>
      <div class="feature-card" data-feature="unlock-users">
        <div class="feature-icon">üîì</div>
        <div class="feature-title">Unlock users</div>
        <div class="feature-desc">M·ªü kh√≥a t√†i kho·∫£n ng∆∞·ªùi d√πng AD.</div>
      </div>
      <div class="feature-card" data-feature="list-vm">
        <div class="feature-icon">üñ•Ô∏è</div>
        <div class="feature-title">List VM</div>
        <div class="feature-desc">Xem danh s√°ch m√°y ·∫£o (VM) trong h·ªá th·ªëng.</div>
      </div>
    </div>
  </div>

  <!-- Dashboard c≈© -->
  <div id="mainBox" style="display:none">
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
      <div id="userInfoDash" class="muted" style="font-size:1rem;"></div>
      <button id="btnBackHome" style="background:#eee;color:#2355d6;border:1px solid #2355d6;padding:6px 18px;font-size:1rem;">Trang ch·ªß</button>
    </div>
    <div class="row">
      <button id="btnSync">Sync Users</button>
      <span id="spinner" class="muted" style="display:none">ƒêang ch·∫°y‚Ä¶</span>
    </div>
    <div class="row">
      <label for="minutes">Schedule (ph√∫t):</label>
      <input id="minutes" type="number" min="1" step="1" value="5">
      <button id="btnStart">Start schedule</button>
      <button id="btnStop">Stop schedule</button>
      <button id="btnRefresh" style="background:#fff;color:#2355d6;border:1px solid #2355d6;padding:6px 16px;font-size:1rem;margin-left:8px;">Refresh</button>
    </div>
    <div id="sched" class="mono muted">Scheduler: ‚Äî</div>
    <div id="status" class="muted">S·∫µn s√†ng.</div>
    <div id="history" class="mono" style="margin-top:24px;">
      <h2>L·ªãch s·ª≠ ƒë·ªìng b·ªô</h2>
      <div id="historyList">ƒêang t·∫£i...</div>
    </div>
    <div id="schedules" class="mono" style="margin-top:24px;">
      <h2>Danh s√°ch schedule</h2>
      <div id="scheduleList">ƒêang t·∫£i...</div>
    </div>
  </div>

  <!-- Trang th√¥ng b√°o ph√°t tri·ªÉn -->
  <div id="devBox" style="display:none;text-align:center;padding:60px 0;">
    <div style="font-size:2.2rem;margin-bottom:18px;">üöß</div>
    <div style="font-size:1.3rem;font-weight:500;margin-bottom:10px;">T√≠nh nƒÉng n√†y ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn</div>
    <div style="color:#666;font-size:1.05rem;">Vui l√≤ng quay l·∫°i sau.</div>
    <button id="btnBackHome2" style="margin-top:32px;background:#eee;color:#2355d6;border:1px solid #2355d6;padding:8px 24px;font-size:1rem;">Quay v·ªÅ trang ch·ªß</button>
  </div>

  <div style="position:fixed;right:12px;bottom:10px;z-index:99;font-size:13px;color:#888;user-select:none;pointer-events:none;">ver 1.2.2</div>

  <style>
    #loginBox {
      max-width: 400px;
      margin: 48px auto 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 16px #0002;
      padding: 36px 28px 28px 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #loginBox h2 {
      margin: 0 0 20px 0;
      font-size: 1.3rem;
      font-weight: 700;
      text-align: center;
    }
    #loginForm {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    #loginForm input[type="text"],
    #loginForm input[type="password"] {
      width: 100%;
      padding: 10px 12px;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    #btnLogin {
      width: 100%;
      margin-bottom: 8px;
    }
    #loginMsg {
      min-height: 20px;
      margin-top: 6px;
      text-align: center;
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 28px;
      margin: 32px 0 0 0;
    }
    .feature-card {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 2px 12px #0001, 0 1.5px 0 #2355d6;
      padding: 32px 18px 24px 18px;
      text-align: center;
      cursor: pointer;
      transition: box-shadow .18s, transform .18s;
      border: 1.5px solid #e3e8f0;
      min-height: 180px;
      position: relative;
    }
    .feature-card:hover {
      box-shadow: 0 4px 24px #2355d633, 0 1.5px 0 #2355d6;
      transform: translateY(-2px) scale(1.03);
      border-color: #2355d6;
    }
    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 12px;
    }
    .feature-title {
      font-size: 1.18rem;
      font-weight: 600;
      margin-bottom: 6px;
      color: #2355d6;
    }
    .feature-desc {
      color: #555;
      font-size: 1.01rem;
    }
  </style>
  <style>
    #unlockBox {
      max-width: 400px;
      margin: 48px auto 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 16px #0002;
      padding: 36px 28px 28px 28px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #unlockBox h2 {
      margin: 0 0 20px 0;
      font-size: 1.3rem;
      font-weight: 600;
      text-align: center;
    }
    #unlockForm {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    #unlockForm input[type="text"],
    #unlockForm input[type="password"] {
      width: 100%;
      padding: 10px 12px;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    #unlockUser {
      min-height: 38px;
      resize: vertical;
    }
    #unlockMsg {
      min-height: 20px;
      margin-top: 6px;
      text-align: center;
    }
    #btnUnlock {
      width: 100%;
      margin-bottom: 8px;
    }
    #btnBackHomeUnlock {
      margin-top: 18px;
      background: #eee;
      color: #2355d6;
      border: 1px solid #2355d6;
      padding: 8px 24px;
      font-size: 1rem;
      width: 100%;
    }
  </style>
  <!-- Modules loading order matters: UI modules import from main.js -->
<script type="module" src="./modules/main.js"></script>
<script type="module" src="./modules/ui-home.js"></script>
<script type="module" src="./modules/ui-dashboard.js"></script>
<script type="module" src="./modules/ui-unlock.js"></script>
<script type="module" src="./modules/ui-vm.js"></script>
</body>
</html>
